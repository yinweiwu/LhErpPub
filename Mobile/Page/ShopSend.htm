<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" type="text/css" href="/Base/JS/easyui/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="/Base/JS/easyui/themes/mobile.css" />
    <link rel="stylesheet" type="text/css" href="/Base/JS/easyui/themes/icon.css" />
    <script type="text/javascript" src="/Base/JS/easyui/jquery.min.js"></script>
    <script type="text/javascript" src="/Base/JS/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/Base/JS/easyui/jquery.easyui.mobile.js"></script>
    <script src="/Base/JS/easyui/locale/easyui-lang-zh_CN.js" type="text/javascript"></script>
    <script src="/Base/JS/json2.js" type="text/javascript"></script>
    <script src="/Base/JS/DataInterface.js" type="text/javascript"></script>
    <script type="text/javascript" src="/Mobile/JS/LookUpMobile.js"></script>
    <script src="/Mobile/JS/PageMobile.js" type="text/javascript"></script>
    <script src="/Base/JS/approval.js" type="text/javascript"></script>
    <style type="text/css">
        .txbreadonly
        {
            background-color: #ffffaa;
            border: none;
            border-bottom: solid 1px #95b8e7; /*height: 18px;*/ /*border-radius: 5px;*/
        }
    </style>
    <script language="javascript" type="text/javascript">
        var isOrderListLoad = false;
        var isStockListLoad = false;

        $(function () {
            if (pageMobile.isDetail == "0") {
                pageMobile.toolBarBtnAdd("msubmit", "提交", "import", function () {
                    $.messager.confirm("确认提交吗", "您确认提交吗？", function (r) {
                        if (r) {
                            var sqlObjExists = {
                                TableName: "SDSendM",
                                Fields: "1",
                                SelectAll: "True",
                                Filters: [
                                {
                                    Field: "iRecNo",
                                    ComOprt: "=",
                                    Value: "'" + pageMobile.key + "'"
                                }
                            ]
                            }
                            var resultExists = SqlGetData(sqlObjExists);
                            if (resultExists.length > 0) {
                                var jsonobj = {
                                    StoreProName: "SpMobileSendMSubmit",
                                    StoreParms: [
                                    {
                                        ParmName: "@iRecNo",
                                        Value: pageMobile.key
                                    }
                                ]
                                }
                                var result = SqlStoreProce(jsonobj);
                                if (result != "1") {
                                    showMessage("提交时出错", result);
                                }
                                else {
                                    window.location.href = "../datalist.htm?iMenuID=" + getQueryString("iMenuID") + "&iFormID=" + pageMobile.iformid + "&isDetail=0&random=" + Math.random();
                                }
                            }
                        }
                    })
                });
            }
            if (pageMobile.isDetail == "1") {
                if (pageMobile.usetype == "modify" || pageMobile.usetype == "view") {
                    var sqlObjSendD = {
                        TableName: "vwSdSendD",
                        Fields: "iSdContractMRecNo,ibscDataStyleMRecNo,ibscDataColorRecNo,sOrderNo,sStyleNo,sColorName",
                        SelectAll: "True",
                        Filters: [
                            {
                                Field: "iRecNo",
                                ComOprt: "=",
                                Value: "'" + pageMobile.key + "'"
                            }
                        ]
                    }
                    var resultSendD = SqlGetData(sqlObjSendD);
                    if (resultSendD.length > 0) {
                        $("#" + pageMobile.htmlFormID).form("load", resultSendD[0]);
                    }
                }
                var mainData = $("#form1").serializeObject();
                var sSizeGroupID = mainData.sSizeGroupID;
                var sqlObj = {
                    TableName: "bscDataSize",
                    Fields: "sSizeName",
                    SelectAll: "True",
                    Filters: [
                    {
                        Field: "sClassID",
                        ComOprt: "=",
                        Value: "'" + sSizeGroupID + "'"
                    }
                ]
                }
                var result = SqlGetData(sqlObj);
                if (result.length > 0) {
                    var htmlLi = "";
                    for (var i = 0; i < result.length; i++) {
                        htmlLi += "<li>" + result[i].sSizeName;
                        htmlLi += "<div class=\"m-right\">";
                        htmlLi += "<input name=\"" + result[i].sSizeName + "\" type=\"text\" class=\"easyui-numberbox\" data-options=\"width:120,precision:0\" />";
                        htmlLi += "</div></li>";
                    }
                    var chtml = $(htmlLi);
                    $("#ulSizeDetail").append(chtml);
                    $.parser.parse("#ulSizeDetail");
                    isSizeLoad = true;

                    //获取已有的尺码明细
                    var sqlObjSize = {
                        TableName: "SDSendDD",
                        Fields: "sSizeName,iQty",
                        SelectAll: "True",
                        Filters: [
                            {
                                Field: "iMainRecNo",
                                ComOprt: "=",
                                Value: "'" + pageMobile.key + "'"
                            }
                        ]
                    }
                    var resultSize = SqlGetData(sqlObjSize);
                    if (resultSize.length > 0) {
                        var sizeDataS = {};
                        for (var i = 0; i < resultSize.length; i++) {
                            sizeDataS[(resultSize[i].sSizeName)] = resultSize[i].iQty;
                        }
                        $("#form3").form("load", sizeDataS);
                    }
                }
                pageMobile.toolBarBtnAdd("importOrder", "订单转入", "import", function () {
                    if (isOrderListLoad == false) {
                        $("#tableOrder").datagrid(
                            {
                                fit: true,
                                border: false,
                                toolbar: "#",
                                remoteSort: false,
                                pagination: true,
                                pageNumber: 1,
                                pageSize: 30,
                                pageList: [30, 60, 100, 300, 500],
                                loadFilter: pagerFilter,
                                columns: [[
                                    { field: "__ckb", checkbox: true, width: 30 },
                                    { title: "订单号", field: "sOrderNo", width: 100, align: "center" },
                                    { title: "订单交期", field: "dOrderDate", width: 80, align: "center" },
                                    { title: "款号", field: "sStyleNo", width: 80, align: "center" },
                                    { title: "颜色", field: "sColorName", width: 100, align: "center" },
                                    { title: "尺码", field: "sSizeName", width: 40, align: "center" },
                                    { title: "订单数量", field: "iOrderQty", width: 60, align: "center" },
                                    { title: "单价", field: "fPrice", width: 60, align: "center" },
                                    { title: "未发数量", field: "iNotSendQty", width: 60, align: "center" },
                                    { title: "库存数量", field: "iStockQty", width: 60, align: "center" },
                                    { title: "已发数量", field: "iSendQty", width: 60, align: "center" },
                                    { title: "", field: "iRecNo", width: 60, align: "center", hidden: true },
                                    { title: "", field: "ibscDataStyleMRecNo", width: 60, align: "center", hidden: true },
                                    { title: "", field: "iBscDataColorRecNo", width: 60, align: "center", hidden: true }
                                ]]
                            }
                        );
                        isOrderListLoad = true;
                    }
                    $.mobile.go("#divFromOrderSearch");
                });
                pageMobile.toolBarBtnAdd("importOrder", "仓库转入", "import", function () {
                    if (isStockListLoad == false) {
                        $("#tableStock").datagrid(
                            {
                                fit: true,
                                border: false,
                                toolbar: "#",
                                remoteSort: false,
                                pagination: true,
                                pageNumber: 1,
                                pageSize: 30,
                                loadFilter: pagerFilter,
                                pageList: [30, 60, 100, 300, 500],
                                columns: [[
                                    { field: "__ckb", checkbox: true, width: 30 },
                                    { title: "款号", field: "sStyleNo", width: 80, align: "center" },
                                    { title: "颜色", field: "sColorName", width: 100, align: "center" },
                                    { title: "尺码", field: "sSizeName", width: 40, align: "center" },
                                    { title: "数量", field: "iQty", width: 60, align: "center" },
                                    { title: "仓库", field: "sStockName", width: 100, align: "center" },
                                    { title: "库存供应商", field: "sCustShortName", width: 100, align: "center" },
                                    { title: "", field: "ibscDataStockMRecNo", width: 60, align: "center", hidden: true },
                                    { title: "", field: "ibscDataStyleMRecNo", width: 60, align: "center", hidden: true },
                                    { title: "", field: "ibscDataColorRecNo", width: 60, align: "center", hidden: true }
                                ]]
                            }
                        );
                        isStockListLoad = true;
                    }
                    $.mobile.go("#divFromStockSearch");
                });
            }

        })
        var isSizeLoad = false;
        function openSizeDetail() {
            if (isSizeLoad == false) {
                var mainData = $("#form1").serializeObject();
                var sSizeGroupID = mainData.sSizeGroupID;
                var sqlObj = {
                    TableName: "bscDataSize",
                    Fields: "sSizeName",
                    SelectAll: "True",
                    Filters: [
                    {
                        Field: "sClassID",
                        ComOprt: "=",
                        Value: "'" + sSizeGroupID + "'"
                    }
                ]
                }
                var result = SqlGetData(sqlObj);
                if (result.length > 0) {
                    var htmlLi = "";
                    for (var i = 0; i < result.length; i++) {
                        htmlLi += "<li>" + result[i].sSizeName;
                        htmlLi += "<div class=\"m-right\">";
                        htmlLi += "<input name=\"" + result[i].sSizeName + "\" type=\"text\" class=\"easyui-numberbox\" data-options=\"width:120,precision:0\" />";
                        htmlLi += "</div></li>";
                    }
                    var chtml = $(htmlLi);
                    $("#ulSizeDetail").append(chtml);
                    $.parser.parse("#ulSizeDetail");
                    isSizeLoad = true;

                    //获取已有的尺码明细
                    var sqlObjSize = {
                        TableName: "SDSendDD",
                        Fields: "sSizeName,iQty",
                        SelectAll: "True",
                        Filters: [
                            {
                                Field: "iMainRecNo",
                                ComOprt: "=",
                                Value: "'" + pageMobile.key + "'"
                            }
                        ]
                    }
                    var resultSize = SqlGetData(sqlObjSize);
                    if (resultSize.length > 0) {
                        var sizeDataS = {};
                        for (var i = 0; i < resultSize.length; i++) {
                            sizeDataS[(resultSize[i].sSizeName)] = resultSize[i].iQty;
                        }
                        $("#form3").form("load", sizeDataS);
                    }
                }
            }
            $.mobile.go("#divSize");
        }

        function clearVal() {
            $("#form3").form("clear");
        }
        function sizeFinish() {
            if (saveSize() == true) {
                $.mobile.back();
            }
        }

        function saveSize() {
            var sizeData = $("#form3").serializeArray();
            var iSumQty = 0;
            var sStr = "";
            for (var i = 0; i < sizeData.length; i++) {
                iSumQty += isNaN(Number(sizeData[i].value)) ? 0 : Number(sizeData[i].value);
                sStr += sizeData[i].name + "=" + sizeData[i].value + ",";
            }
            if (sStr != "") {
                sStr = sStr.substr(0, sStr.length - 1);
            }
            pageMobile.setFieldValue("iSumQty", iSumQty);
            var fPrice = isNaN(Number(pageMobile.getFieldValue("fPrice"))) ? 0 : Number(pageMobile.getFieldValue("fPrice"));
            var fTotal = iSumQty * fPrice;
            pageMobile.setFieldValue("fTotal", fPrice * iSumQty);

            var jsonobj = {
                StoreProName: "SpMobileSDSendDDSave",
                StoreParms: [
                        {
                            ParmName: "@iMainRecNo",
                            Value: pageMobile.key
                        },
                        {
                            ParmName: "@sStr",
                            Value: sStr,
                            Size: -1
                        }
                 ]
            }
            var result = SqlStoreProce(jsonobj);
            if (result != "1") {
                showMessage("保存时出错", result);
                return false;
            }
            else {
                //$.mobile.back();
                return true;
            }
        }

        function orderSearch() {
            var serchdataArr = $("#form4").serializeArray();
            //var filters = "1=1";
            var Filters = [
                {
                    Field: "ibscDataCustomerRecNo",
                    ComOprt: "=",
                    Value: "'" + pageMobile.mainData.ibscDataCustomerRecNo + "'",
                    LinkOprt: "and"
                },
                {
                    Field: "sSizeGroupID",
                    ComOprt: "=",
                    Value: "'" + pageMobile.mainData.sSizeGroupID + "'",
                    LinkOprt: "and"
                },
                {
                    Field: "iNotSendQty",
                    ComOprt: ">",
                    Value: "0"
                }
            ];

            if (serchdataArr[0].value != "" && serchdataArr[0].value != null && serchdataArr[0].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "dOrderDate",
                        ComOprt: ">=",
                        Value: "'" + serchdataArr[0].value + "'"
                    }
                )
            }
            if (serchdataArr[1].value != "" && serchdataArr[1].value != null && serchdataArr[1].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "dOrderDate",
                        ComOprt: "<=",
                        Value: "'" + serchdataArr[1].value + "'"
                    }
                )
            }
            if (serchdataArr[2].value != "" && serchdataArr[2].value != null && serchdataArr[2].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "sStyleNo",
                        ComOprt: "like",
                        Value: "'%" + serchdataArr[2].value + "%'"
                    }
                )
            }
            var sqlObj = {
                TableName: "vwSdContractMDNotSend",
                Fields: "top 500 *",
                SelectAll: "True",
                Filters: Filters,
                Sorts: [
                    {
                        SortName: "iRecNo",
                        SortOrder: "asc"
                    },
                    {
                        SortName: "ibscDataStyleMRecNo",
                        SortOrder: "asc"
                    },
                    {
                        SortName: "iBscDataColorRecNo",
                        SortOrder: "asc"
                    }
                ]
            }
            var result = SqlGetData(sqlObj);
            $("#tableOrder").datagrid("loadData", result);
            $.mobile.go("#divFromOrder");
        }
        function stockSearch() {
            var serchdataArr = $("#form5").serializeArray();
            //var filters = "1=1";
            var Filters = [
                {
                    Field: "ibscDataCustomerRecNo",
                    ComOprt: "=",
                    Value: "'" + pageMobile.mainData.ibscDataCustomerRecNo + "'"
                }
            ];

            if (serchdataArr[0].value != "" && serchdataArr[0].value != null && serchdataArr[0].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "sStockName",
                        ComOprt: "like",
                        Value: "'%" + serchdataArr[0].value + "%'"
                    }
                )
            }
            if (serchdataArr[1].value != "" && serchdataArr[1].value != null && serchdataArr[1].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "sStyleNo",
                        ComOprt: "like",
                        Value: "'" + serchdataArr[1].value + "'"
                    }
                )
            }
            if (serchdataArr[2].value != "" && serchdataArr[2].value != null && serchdataArr[2].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "sColorName",
                        ComOprt: "like",
                        Value: "'%" + serchdataArr[2].value + "%'"
                    }
                )
            }
            if (serchdataArr[3].value != "" && serchdataArr[3].value != null && serchdataArr[3].value != undefined) {
                if (Filters.length > 0) {
                    Filters[Filters.length - 1].LinkOprt = "and"
                }
                Filters.push(
                    {
                        Field: "sSizeName",
                        ComOprt: "=",
                        Value: "'" + serchdataArr[2].value + "'"
                    }
                )
            }
            var sqlObj = {
                TableName: "vwMMProductStockQty",
                Fields: "top 500 *",
                SelectAll: "True",
                Filters: Filters
            }
            var result = SqlGetData(sqlObj);
            $("#tableStock").datagrid("loadData", result);
            $.mobile.go("#divFromStock");
        }

        function orderSelect() {
            var selectedRows = $("#tableOrder").datagrid("getChecked");
            if (selectedRows.length > 0) {
                var sizeData = {};
                var iRecNo = undefined;
                var ibscDataStyleMRecNo = undefined;
                var iBscDataColorRecNo = undefined;
                var iSumQty = 0;
                for (var i = 0; i < selectedRows.length; i++) {
                    if (i == 0) {
                        iRecNo = selectedRows[i].iRecNo;
                        ibscDataStyleMRecNo = selectedRows[i].ibscDataStyleMRecNo;
                        iBscDataColorRecNo = selectedRows[i].iBscDataColorRecNo;
                    }
                    if (iRecNo != selectedRows[i].iRecNo || ibscDataStyleMRecNo != selectedRows[i].ibscDataStyleMRecNo || iBscDataColorRecNo != selectedRows[i].iBscDataColorRecNo) {
                        showMessage("只能转入同一订单号同款同色", "对不起，只能转入同一订单号的同款同色！");
                        return false;
                    }
                    else {
                        sizeData[(selectedRows[i].sSizeName)] = selectedRows[i].iNotSendQty;
                        iSumQty += parseInt(selectedRows[i].iNotSendQty);
                    }
                }
                $("#form3").form("load", sizeData);
                if (saveSize() == true) {
                    var appData = {
                        iSdContractMRecNo: selectedRows[0].iRecNo,
                        ibscDataStyleMRecNo: selectedRows[0].ibscDataStyleMRecNo,
                        ibscDataColorRecNo: selectedRows[0].iBscDataColorRecNo,
                        sOrderNo: selectedRows[0].sOrderNo,
                        sStyleNo: selectedRows[0].sStyleNo,
                        sColorName: selectedRows[0].sColorName,
                        fOrderPrice: selectedRows[0].fPrice,
                        fPrice: selectedRows[0].fPrice,
                        iSumQty: iSumQty,
                        fTotal: iSumQty * (isNaN(Number(selectedRows[0].fPrice)) ? 0 : Number(selectedRows[0].fPrice))
                    };
                    $("#form2").form("load", appData);
                    $.mobile.back();
                    $.mobile.back();
                }
            }
            else {
                showMessage("未选择", "尚未选择任何行！");
            }
        }

        function stockSelect() {
            var selectedRows = $("#tableStock").datagrid("getChecked");
            if (selectedRows.length > 0) {
                var sizeData = {};
                //var iRecNo = undefined;
                var ibscDataStyleMRecNo = undefined;
                var ibscDataColorRecNo = undefined;
                var iSumQty = 0;
                for (var i = 0; i < selectedRows.length; i++) {
                    if (i == 0) {
                        iRecNo = selectedRows[i].iRecNo;
                        ibscDataStyleMRecNo = selectedRows[i].ibscDataStyleMRecNo;
                        ibscDataColorRecNo = selectedRows[i].ibscDataColorRecNo;
                    }
                    if (ibscDataStyleMRecNo != selectedRows[i].ibscDataStyleMRecNo || ibscDataColorRecNo != selectedRows[i].ibscDataColorRecNo) {
                        showMessage("只能转入同款同色", "对不起，只能转入同款同色！");
                        return false;
                    }
                    else {
                        sizeData[(selectedRows[i].sSizeName)] = selectedRows[i].iQty;
                        iSumQty += parseInt(selectedRows[i].iQty);
                    }
                }
                $("#form3").form("load", sizeData);
                if (saveSize() == true) {
                    var appData = {
                        ibscDataStyleMRecNo: selectedRows[0].ibscDataStyleMRecNo,
                        ibscDataColorRecNo: selectedRows[0].ibscDataColorRecNo,
                        sStyleNo: selectedRows[0].sStyleNo,
                        sColorName: selectedRows[0].sColorName,
                        iSumQty: iSumQty,
                        fTotal: 0
                    };
                    $("#form2").form("load", appData);
                    $.mobile.back();
                    $.mobile.back();
                }
            }
            else {
                showMessage("未选择", "尚未选择任何行！");
            }
        }

        pageMobile.Formula = function (field) {
            if (pageMobile.isInited == true) {
                if (field == "fPrice") {
                    var fPrice = isNaN(Number(pageMobile.getFieldValue("fPrice"))) ? 0 : Number(pageMobile.getFieldValue("fPrice"));
                    var iSumQty = isNaN(Number(pageMobile.getFieldValue("iSumQty"))) ? 0 : Number(pageMobile.getFieldValue("iSumQty"));
                    var fTotal = fPrice * iSumQty;
                    pageMobile.setFieldValue("fTotal", fTotal);
                }
            }
        }

        pageMobile.afterSave = function () {
            if (pageMobile.isDetail == "1") {
                var jsonobj = {
                    StoreProName: "SpMobileSendMSumReset",
                    StoreParms: [
                        {
                            ParmName: "@iMainRecNo",
                            Value: pageMobile.mainKey
                        }
                 ]
                }
                var result = SqlStoreProce(jsonobj);
                
            }
        }

        pageMobile.afterRemove = function () {
            if (pageMobile.isDetail == "1") {
                var jsonobj = {
                    StoreProName: "SpMobileSendMSumReset",
                    StoreParms: [
                        {
                            ParmName: "@iMainRecNo",
                            Value: pageMobile.mainKey
                        }
                 ]
                }
                var result = SqlStoreProce(jsonobj);
            }
        }

        function pagerFilter(data) {
            if (typeof data.length == 'number' && typeof data.splice == 'function') {    // 判断数据是否是数组
                data = {
                    total: data.length,
                    rows: data
                }
            }
            var dg = $(this);
            var opts = dg.datagrid('options');
            var pager = dg.datagrid('getPager');
            pager.pagination({
                onSelectPage: function (pageNum, pageSize) {
                    opts.pageNumber = pageNum;
                    opts.pageSize = pageSize;
                    pager.pagination('refresh', {
                        pageNumber: pageNum,
                        pageSize: pageSize
                    });
                    dg.datagrid('loadData', data);
                }
            });
            if (!data.originalRows) {
                data.originalRows = (data.rows);
            }
            var start = (opts.pageNumber - 1) * parseInt(opts.pageSize);
            var end = start + parseInt(opts.pageSize);
            data.rows = (data.originalRows.slice(start, end));
            return data;
        }
    </script>
</head>
<body>
    <div id="divContent" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" style="width:50px" onclick="pageMobile.backToList()">列表</a>                    
                    <!--<a id="ptitle" href="javascript:void(0)" class="easyui-linkbutton" plain="true" style=" font-weight:bold;"></a>-->
                </div>
                <div class="m-right" id="toolbar">
                    <a id="btnDelete" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-remove',plain:true" onclick="pageMobile.removef()">删除</a>
                    <a id="btnDetail" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-document',plain:true" onclick="pageMobile.showDetail()">明细</a>
                    <a id="btnSubmit" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-submit',plain:true" onclick="pageMobile.submit()">提交</a>
                    <a id="btnSaveAndContine" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true" onclick="pageMobile.save(1)">保存并继续</a>
                    <a id="btnSave" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true" onclick="pageMobile.save(0)">保存</a>
                </div>
            </div>
        </header>
        <!--以下是页面字段内容，
        form1是主表，form2是子表，这是固定的，如果没有子表，就不要form2，
        一个字段一行，左边是标题，右边是输入框，一个li表示一行-->
        <form id="form1" method="post">
        <div style="display: none;">
            <input id="Text23" name="sBillNo" type="hidden" />
            <input id="Hidden1" name="sSizeGroupName" type="hidden" />
            <input id="Text1" name="dDate" type="text" />
            <input id="Hidden2" name="sSaleID" type="hidden" />
            <input id="Hidden3" name="sTraceID" type="hidden" />
            <input id="Hidden4" name="sOutType" type="hidden" />
            <input id="Hidden5" name="iStatus" type="hidden" />
            <input id="Hidden6" name="iSerial" type="hidden" />
        </div>
        <ul class="m-list">
            <li class="m-list-group">基本信息</li>
            <li>客户
                <div class="m-right">
                    <input id="Text3" name="ibscDataCustomerRecNo" fieldtype="整数" type="text" />
                </div>
            </li>
            <li>发货日期
                <div class="m-right">
                    <input id="Text2" name="dSendDate" fieldtype="日期" type="text" />
                </div>
            </li>
            <li>尺码组
                <div class="m-right">
                    <input id="Text4" name="sSizeGroupID" type="text" />
                </div>
            </li>
            <li>备注
                <div class="m-right">
                    <input id="Text6" name="sReMark" fieldtype="备注" type="text" />
                </div>
            </li>
            <li>制单人
                <div class="m-right">
                    <input id="Text7" name="sUserID" isreadonly="true" type="text" />
                </div>
            </li>
            <li>制单时间
                <div class="m-right">
                    <input id="Text8" name="dInputDate" isreadonly="true" type="text" />
                </div>
            </li>
            <li class="m-list-group">发货信息</li>
            <li>
                <!--字段标题的位置-->
                运输方式
                <div class="m-right">
                    <input id="Text9" name="sTransType" fieldtype="备注" type="text" />
                </div>
            </li>
            <li>包装方式
                <div class="m-right">
                    <input id="Text10" name="sPackageType" fieldtype="备注" is type="text" />
                </div>
            </li>
            <li>收货人
                <div class="m-right">
                    <input id="Text17" name="sPerson" fieldtype="字符" type="text" />
                </div>
            </li>
            <li>联系电话
                <div class="m-right">
                    <input id="Text21" name="sTel" fieldtype="字符" type="text" />
                </div>
            </li>
            <li>收货地址
                <div class="m-right">
                    <input id="Text22" name="sAddress" fieldtype="备注" style="height: 60px;" type="text" />
                </div>
            </li>
        </ul>
        </form>
        <form id="form2" method="post">
        <div style="display: none;">
            <input id="Text15" name="iSdContractMRecNo" type="text" />
            <input id="Text26" name="ibscDataStyleMRecNo" type="text" />
            <input id="Text27" name="ibscDataColorRecNo" type="text" />
        </div>
        <ul class="m-list">
            <li>
                <!--字段标题的位置-->
                序号
                <div class="m-right">
                    <input id="Text11" name="iSerial" fieldtype="整数" type="text" />
                </div>
            </li>
            <li>订单号
                <div class="m-right">
                    <input id="Text5" name="sOrderNo" disabled="disabled" fieldtype="字符" type="text" />
                </div>
            </li>
            <li>款号
                <div class="m-right">
                    <input id="Text12" name="sStyleNo" disabled="disabled" fieldtype="字符" type="text" />
                </div>
            </li>
            <li>颜色
                <div class="m-right">
                    <input id="Text13" name="sColorName" disabled="disabled" fieldtype="字符" type="text" />
                </div>
            </li>
            <li>订单价
                <div class="m-right">
                    <input id="Text24" name="fOrderPrice" isReadonly="true" fieldtype="数据" decimalnum="2"
                        type="text" />
                </div>
            </li>
            <li>单价
                <div class="m-right">
                    <input id="Text25" name="fPrice" fieldtype="数据" decimalnum="2" type="text" />
                </div>
            </li>
            <li><a href="javascript:void(0)" onclick="openSizeDetail()">尺码明细</a></li>
            <li>数量
                <div class="m-right">
                    <input id="Text14" name="iSumQty" fieldtype="整数" isReadonly="true" type="text" />
                </div>
            </li>
            <li>金额
                <div class="m-right">
                    <input id="Text16" name="fTotal" fieldtype="数据" isReadonly="true" decimalnum="2"
                        type="text" />
                </div>
            </li>
            <li>备注
                <div class="m-right">
                    <input id="Text18" name="sRemark" fieldtype="备注" type="text" />
                </div>
            </li>
            <li>制单人
                <div class="m-right">
                    <input id="Text19" name="sUserID" isreadonly="true" type="text" />
                </div>
            </li>
            <li>制单时间
                <div class="m-right">
                    <input id="Text20" name="dInputDate" isreadonly="true" type="text" />
                </div>
            </li>
        </ul>
        </form>
    </div>
    <div id="divLookUpList" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="lookUpMobile.reset();$.mobile.back();">退回</a>
                </div>
                <div id="divLookUpTitle" class="m-title"></div>
                <div class="m-right">
                    <a id="btnLookUpSearch" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" onclick="lookUpMobile.showCondition()">查询</a>
                </div>
            </div>
        </header>
        <div id="divLookUpResultList">
        </div>
    </div>
    <div id="divLookUpSearch" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div2" class="m-title">查询条件</div>
                <div class="m-right">
                    <a id="btnLookUpSearchClear" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-cancel',plain:true" onclick="lookUpMobile.conditionClear()">清空</a>
                    <a id="btnLookUpSearchFinish" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ok',plain:true" onclick="lookUpMobile.search()">完成</a>
                </div>
            </div>
        </header>
        <form id="formLookUpCondition">
        <ul id="ulLookUpSearch" class="m-list">
        </ul>
        </form>
    </div>
    <div id="divSize" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div1" class="m-title">尺码明细</div>
                <div class="m-right">
                    <a id="A1" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-cancel',plain:true" onclick="clearVal()">清空</a>
                    <a id="A2" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ok',plain:true" onclick="sizeFinish()">完成</a>
                </div>
            </div>
        </header>
        <form id="form3">
        <ul id="ulSizeDetail" class="m-list">
        </ul>
        </form>
    </div>
    <div id="divFromOrderSearch" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div6" class="m-title">从订单转入查询</div>
                <div class="m-right">
                    <a id="A5" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" onclick="orderSearch()">查询</a>
                </div>
            </div>
        </header>
        <form id="form4">
        <ul id="ulFromOrderSearchList" class="m-list">
            <li>订单交期从
                <div class="m-right">
                    <input name="dOrderDate" type="text" class="easyui-datebox" data-options="width:120" />
                </div>
            </li>
            <li>至
                <div class="m-right">
                    <input name="dOrderDate" type="text" class="easyui-datebox" data-options="width:120" />
                </div>
            </li>
            <li>款号
                <div class="m-right">
                    <input name="sStyleNo" type="text" class="easyui-numberbox" data-options="width:120" />
                </div>
            </li>
        </ul>
        </form>
    </div>
    <div id="divFromStockSearch" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div8" class="m-title">从库存转入查询</div>
                <div class="m-right">
                    <a id="A6" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" onclick="stockSearch()">查询</a>
                </div>
            </div>
        </header>
        <form id="form5">
        <ul id="ulFromStockSearchList" class="m-list">
            <li>仓库
                <div class="m-right">
                    <input name="sStockName" type="text" class="easyui-textbox" data-options="width:120" />
                </div>
            </li>
            <li>款号
                <div class="m-right">
                    <input name="sStyleNo" type="text" class="easyui-textbox" data-options="width:120" />
                </div>
            </li>
            <li>颜色
                <div class="m-right">
                    <input name="sColorName" type="text" class="easyui-textbox" data-options="width:120" />
                </div>
            </li>
            <li>尺码
                <div class="m-right">
                    <input name="sSizeName" type="text" class="easyui-textbox" data-options="width:120" />
                </div>
            </li>
        </ul>
        </form>
    </div>
    <div id="divFromOrder" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div3" class="m-title"></div>
                <div class="m-right">
                    <a id="A3" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ok',plain:true" onclick="orderSelect()">确认选择</a>
                </div>
            </div>
        </header>
        <table id="tableOrder">
        </table>
    </div>
    <div id="divFromStock" class="easyui-navpanel">
        <header>
            <div class="m-toolbar">
                <div class="m-left" style="vertical-align:middle;">
                    <a href="javascript:void(0)" class="easyui-linkbutton m-back" plain="true" outline="true" style="width:50px" onclick="$.mobile.back();">退回</a>
                </div>
                <div id="div5" class="m-title"></div>
                <div class="m-right">
                    <a id="A4" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ok',plain:true" onclick="stockSelect()">确认选择</a>
                </div>
            </div>
        </header>
        <table id="tableStock">
        </table>
    </div>
</body>
</html>
